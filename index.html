<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Disease Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script type="module" src="constants/index.js"></script>
    <script type="module" src="utils/index.js"></script>
    <script type="module" src="chart/main.js"></script>
    <script type="module" src="chart/task1.js"></script>
    <script type="module" src="chart/task2.js"></script>
    <script type="module" src="chart/task3.js"></script>
    <script type="module" src="chart/task4.js"></script>
    <script type="module" src="chart/task5.js"></script>
    <script type="module" src="chart/task6.js"></script>
    <script type="module" src="chart/task7.js"></script>
    <script type="module" src="chart/task8.js"></script>
</head>

<body>
    <header>Final Project<br>Heart Disease Data Visualization</header>
    <div class="tabs">
        <!-- Thêm tab Dashboard và đặt làm active -->
        <div class="tab active" data-target="dashboard">Dashboard</div>
        <!-- Các tab gốc -->
        <div class="tab" data-target="age-distribution">Age Distribution</div>
        <div class="tab" data-target="gender-disease">Gender & Disease</div>
        <div class="tab" data-target="smoking-disease">Smoking & Disease</div>
        <div class="tab" data-target="exercise-disease">Exercise & Disease</div>
        <div class="tab" data-target="cholesterol-disease">Cholesterol</div>
        <div class="tab" data-target="bmi-disease">BMI</div>
        <div class="tab" data-target="family-history">Family heart disease</div>
        <div class="tab" data-target="cholesterol-gender">Cholesterol between Genders</div>
    </div>

    <!-- Tab Content Areas -->

    <!-- Khu vực nội dung Dashboard mới, chứa biểu đồ task 1 và 2 -->
    <div id="dashboard" class="tab-content active">
   
        <div class="chart" id="chart-age-distribution-dash"></div>
        <div class="chart" id="chart-gender-disease-dash"></div>
        <div class="chart" id="chart-cholesterol-disease-dash"></div>
        <div class="chart" id="chart-bmi-disease-dash"></div>
    </div>

    <!-- Khu vực nội dung gốc (có thể để trống hoặc chứa lại biểu đồ nếu muốn) -->
    <div id="age-distribution" class="tab-content chart">
        <!-- Có thể để trống hoặc thêm lại <div class="chart" id="chart-age-distribution-orig"></div> nếu cần -->
        <div class="chart" id="chart-age-distribution"></div>
    </div>
    <div id="gender-disease" class="tab-content">
        <!-- Có thể để trống hoặc thêm lại  -->
         <div class="chart" id="chart-gender-disease"></div>
         <div class="chart" id="chart-gender-disease-groupbar"></div>
    </div>

    <div id="smoking-disease" class="tab-content">
        <div class="chart" id="chart-smoking-disease"></div>
    </div>
    <div id="exercise-disease" class="tab-content">
        <div class="chart" id="chart-exercise-disease"></div>
    </div>
    
    <div id="cholesterol-disease" class="tab-content">
        <div class="chart" id="chart-cholesterol-disease"></div>
    </div>
    <div id="bmi-disease" class="tab-content">
        <div class="chart" id="chart-bmi-disease"></div>
    </div>
    <div id="family-history" class="tab-content">
        <div class="chart" id="chart-family-history"></div>
    </div>
    <div id="cholesterol-gender" class="tab-content">
        <div class="chart" id="chart-cholesterol-gender"></div>
    </div>


    <!-- Main và các script riêng -->
    <script src="./chart/main.js"></script>
    <script src="./chart/task1.js"></script>
    <script src="./chart/task2.js"></script>
    <script src="./chart/task3.js"></script>
    <script src="./chart/task4.js"></script>
    <script src="./chart/task5.js"></script>
    <script src="./chart/task6.js"></script>
    <script src="./chart/task7.js"></script>
    <script src="./chart/task8.js"></script>

    <script type="module">
        import { renderGenderPieChart, renderGenderDiseaseGroupBarChart } from './chart/task2.js';
      
        function clearGenderDiseaseCharts() {
          d3.select('#chart-gender-disease').selectAll('*').remove();
          d3.select('#chart-gender-disease-groupbar').selectAll('*').remove();
        }
      
        const genderTab = document.querySelector('.tab[data-target="gender-disease"]');
        if (genderTab) {
          genderTab.addEventListener('click', () => {
            clearGenderDiseaseCharts();
            renderGenderPieChart(false);
            renderGenderDiseaseGroupBarChart(false);
          });
        }
      
        if (document.getElementById('gender-disease').classList.contains('active')) {
          clearGenderDiseaseCharts();
          renderGenderPieChart(false);
          renderGenderDiseaseGroupBarChart(false);
        }
      </script>

</body>

</html>